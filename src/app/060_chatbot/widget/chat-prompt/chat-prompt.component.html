<div class="chat-prompt container py-4">
  <h4 class="mb-4 text-primary fw-bold">ğŸ’¬ Brapci Chat</h4>

  <div class="chat-box border rounded shadow-sm p-3 bg-white mb-3">
    <div
      *ngFor="let msg of chatHistory"
      class="message mb-2"
      [ngClass]="{
        'bg-light text-end ms-auto': msg.sender === 'user',
        'bg-primary text-white me-auto': msg.sender === 'ollama'
      }"
      style="max-width: 80%; border-radius: 1rem; padding: 10px;"
    >
      <div class="small fw-bold mb-1" *ngIf="msg.sender === 'user'">VocÃª</div>
      <div class="small fw-bold mb-1" *ngIf="msg.sender === 'ollama'">chatBrapci</div>
      <div [innerHTML]="msg.message"></div>
    </div>
  </div>

  <div class="chat-input mt-3">
    <form [formGroup]="chatForm" (ngSubmit)="sendMessage()" class="d-flex flex-column gap-2">
      <textarea
        class="form-control"
        formControlName="userMessage"
        placeholder="Digite sua pergunta..."
        rows="4"
        [readOnly]="busy"
      ></textarea>
      <div class="text-end">
        <button class="btn btn-primary" type="submit" [disabled]="busy || !chatForm.valid">
          {{ busy ? 'Pensando ...' : 'Enviar' }}
        </button>
      </div>
    </form>
  </div>
</div>
